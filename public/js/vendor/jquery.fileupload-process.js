/*! mpdisco 2014-06-26 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],a):a(window.jQuery)}(function($){"use strict";var a=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(b,c){var d=$(this);c.process(function(){return d.fileupload("process",c)}),a.call(this,b,c)}},processActions:{},_processFile:function(a){var b=this,c=$.Deferred().resolveWith(b,[a]),d=c.promise();return this._trigger("process",null,a),$.each(a.processQueue,function(a,c){var e=function(a){return b.processActions[c.action].call(b,a,c)};d=d.pipe(e,c.always&&e)}),d.done(function(){b._trigger("processdone",null,a),b._trigger("processalways",null,a)}).fail(function(){b._trigger("processfail",null,a),b._trigger("processalways",null,a)}),d},_transformProcessQueue:function(a){var b=[];$.each(a.processQueue,function(){var c={},d=this.action,e=this.prefix===!0?d:this.prefix;$.each(this,function(b,d){c[b]="string"===$.type(d)&&"@"===d.charAt(0)?a[d.slice(1)||(e?e+b.charAt(0).toUpperCase()+b.slice(1):b)]:d}),b.push(c)}),a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,c=$.extend({},this.options,a);return c.processQueue&&c.processQueue.length&&(this._transformProcessQueue(c),0===this._processing&&this._trigger("processstart"),$.each(a.files,function(a){var d=a?$.extend({},c):c,e=function(){return b._processFile(d)};d.index=a,b._processing+=1,b._processingQueue=b._processingQueue.pipe(e,e).always(function(){b._processing-=1,0===b._processing&&b._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})});