/*! mpdisco 2014-06-26 */
define(function(){return KeyboardState=function(){this.keyCodes={},this.modifiers={},this.touch=!1,this.touchPosition;var a=this;this._onKeyDown=function(b){a._onKeyChange(b,!0)},this._onKeyUp=function(b){a._onKeyChange(b,!1)},document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("keyup",this._onKeyUp,!1),document.addEventListener("touchstart",this._handleStart.bind(this),!1),document.addEventListener("touchend",this._handleEnd.bind(this),!1),document.addEventListener("touchmove",this._handleMove.bind(this),!1)},KeyboardState.prototype.destroy=function(){document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("keyup",this._onKeyUp,!1)},KeyboardState.MODIFIERS=["shift","ctrl","alt","meta"],KeyboardState.ALIAS={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9},KeyboardState.prototype._onKeyChange=function(a,b){var c=a.keyCode;this.keyCodes[c]=b,this.modifiers.shift=a.shiftKey,this.modifiers.ctrl=a.ctrlKey,this.modifiers.alt=a.altKey,this.modifiers.meta=a.metaKey},KeyboardState.prototype.pressed=function(a){for(var b=a.split("+"),c=0;c<b.length;c++){var d=b[c],e;if(e=-1!==KeyboardState.MODIFIERS.indexOf(d)?this.modifiers[d]:-1!=Object.keys(KeyboardState.ALIAS).indexOf(d)?this.keyCodes[KeyboardState.ALIAS[d]]:this.keyCodes[d.toUpperCase().charCodeAt(0)],!e)return!1}return!0},KeyboardState.prototype._handleStart=function(a){a.preventDefault(),this.touch=!0,this.touchPosition=[a.touches[0].pageX,a.touches[0].pageY]},KeyboardState.prototype._handleMove=function(a){a.preventDefault(),this.touchPosition=[a.touches[0].pageX,a.touches[0].pageY]},KeyboardState.prototype._handleEnd=function(a){a.preventDefault(),this.touch=!1},KeyboardState});