/*! mpdisco 2014-06-26 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],a):a(window.jQuery,window.loadImage)}(function($,a){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",always:!0,prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(b,c){if(c.disabled)return b;var d=this,e=b.files[b.index],f=$.Deferred(),g,h;return this._audioElement.canPlayType&&this._audioElement.canPlayType(e.type)&&("number"!==$.type(c.maxFileSize)||e.size<=c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(e.type))&&(g=a.createObjectURL(e))?(h=this._audioElement.cloneNode(),h.src=g,h.controls=!0,b.audio=h,f.resolveWith(d,[b]),f.promise()):(f.rejectWith(d,[b]),f.promise())},setAudio:function(a,b){return a.audio&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.audio),a}}})});