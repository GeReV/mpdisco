/*! mpdisco 2014-06-22 */
define(["class"],function(a){var b=a.extend({init:function(a,b){this.url="ws://"+a+":"+b+"/",this.callbacks=[],this.socket=io.connect(this.url)},send:function(a,b){this.socket.emit(a,b)},command:function(a,b){(void 0===b||null===b)&&(b=[]),this.socket.emit("command",{command:a,args:b})},commands:function(a){this.socket.emit("commands",a)},publish:function(a,b){for(var c=0,d=this.callbacks.length;d>c;c++)this.callbacks[c](a,b)},subscribe:function(a){this.callbacks.push(a)},unsubscribe:function(a){for(var b=0,c=this.callbacks.length;c>b;b++)this.callbacks[b]===a&&this.callbacks.splice(b,1)},on:function(a,b){this.socket.on(a,b)},off:function(a,b){this.socket.of(a,b)},createPublish:function(a){return function(b){this.publish(a,b)}.bind(this)}});return b});